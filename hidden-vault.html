<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mathematics | Resource Loader</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #020617; }
        .proxy-container { width: 100%; height: 100%; border: none; }
        .status-bar { 
            background: #1e293b; color: #38bdf8; padding: 5px 20px; 
            font-family: monospace; font-size: 12px; display: flex; justify-content: space-between;
            align-items: center;
        }
        /* New button style for the cloaker */
        .cloak-btn {
            background: #38bdf8; color: #020617; border: none; padding: 2px 10px;
            border-radius: 4px; cursor: pointer; font-weight: bold; font-size: 10px;
        }
    </style>
</head>
<body>
    <div class="status-bar">
        <span>SECURE NODE: ACTIVE</span>
        <button class="cloak-btn" onclick="launchCloaked()">ENABLE STEALTH MODE</button>
        <span>LATENCY: 24ms</span>
    </div>

    <iframe id="main-proxy" src="https://jormawo.anjumanallana.in/" class="proxy-container"></iframe>

    <script>
        // Your existing Emergency Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === "Escape") window.location.href = "../portal.html";
        });

        // NEW: The Nebula-style Tab Cloaker
        function launchCloaked() {
            const url = document.getElementById('main-proxy').src;
            const win = window.open();
            if (!win) {
                alert("Please allow popups for Stealth Mode to work.");
                return;
            }
            
            // Set fake title and icon (Google Drive decoy)
            win.document.title = 'My Drive - Google Drive';
            const link = win.document.createElement('link');
            link.rel = 'icon';
            link.href = 'https://ssl.gstatic.com/docs/doclist/images/infinite_drive_2022q4.ico';
            win.document.head.appendChild(link);

            // Embed the proxy in the about:blank page
            const iframe = win.document.createElement('iframe');
            iframe.style = "position:fixed;width:100vw;height:100vh;top:0;left:0;border:none;";
            iframe.src = url;
            win.document.body.appendChild(iframe);
            
            // Optional: Close this tab once the stealth one is open
            // window.close();
        }
    </script>
</body>
</html>
